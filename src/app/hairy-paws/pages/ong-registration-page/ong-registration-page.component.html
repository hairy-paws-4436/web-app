<div class="ong-register-container">
  <p-toast></p-toast>

  <div class="container">
    <div class="card-container">
      <p-card>
        <form [formGroup]="ongForm" (ngSubmit)="onSubmit()">
          <div class="form-section">
            <h2 class="section-title">ONG Logo</h2>
            <p class="section-description">Upload your ONG's logo (optional)</p>

            <p-fileUpload
              name="logo"
              [multiple]="false"
              accept="image/*"
              [maxFileSize]="5000000"
              [customUpload]="true"
              (uploadHandler)="onLogoUpload($event)"
              [disabled]="uploadedFile !== null"
              chooseLabel="Select Logo"
              [auto]="true"
              class="mb-3">
              <ng-template pTemplate="content">
                <div *ngIf="!logoPreview" class="upload-message">
                  <i class="pi pi-image upload-icon"></i>
                  <p>Drag and drop logo here or click to browse</p>
                  <p class="upload-note">Max file size: 5MB. Supported formats: JPG, PNG, GIF</p>
                </div>

                <div *ngIf="logoPreview" class="logo-preview-container">
                  <img [src]="logoPreview" alt="Logo preview" class="logo-preview-image"/>
                  <button type="button"
                          pButton
                          icon="pi pi-times"
                          class="p-button-rounded p-button-danger p-button-text logo-remove-button"
                          (click)="removeLogo()">
                  </button>
                </div>
              </ng-template>
            </p-fileUpload>
          </div>

          <p-divider></p-divider>

          <div class="form-section">
            <h2 class="section-title">Basic Information</h2>

            <div class="form-grid">
              <div class="field col-12 md:col-6">
                <label for="name" class="block font-medium mb-2">NGO Name *</label>
                <input
                  id="name"
                  type="text"
                  pInputText
                  formControlName="name"
                  [ngClass]="{'ng-invalid ng-dirty': isInvalid('name')}"
                  class="w-full">
                <small *ngIf="isInvalid('name')" class="p-error">{{ getErrorMessage('name') }}</small>
              </div>

              <div class="field col-12 md:col-6">
                <label for="ruc" class="block font-medium mb-2">RUC Number *</label>
                <input
                  id="ruc"
                  type="text"
                  pInputText
                  formControlName="ruc"
                  placeholder="11 digits"
                  [ngClass]="{'ng-invalid ng-dirty': isInvalid('ruc')}"
                  class="w-full">
                <small *ngIf="isInvalid('ruc')" class="p-error">{{ getErrorMessage('ruc') }}</small>
              </div>

              <div class="field col-12">
                <label for="description" class="block font-medium mb-2">Description *</label>
                <textarea
                  id="description"
                  pTextarea
                  formControlName="description"
                  [rows]="3"
                  [autoResize]="true"
                  [ngClass]="{'ng-invalid ng-dirty': isInvalid('description')}"
                  class="w-full"></textarea>
                <small *ngIf="isInvalid('description')" class="p-error">{{ getErrorMessage('description') }}</small>
              </div>
            </div>
          </div>

          <p-divider></p-divider>

          <div class="form-section">
            <h2 class="section-title">Contact Information</h2>

            <div class="form-grid">
              <div class="field col-12">
                <label for="address" class="block font-medium mb-2">Address *</label>
                <input
                  id="address"
                  type="text"
                  pInputText
                  formControlName="address"
                  [ngClass]="{'ng-invalid ng-dirty': isInvalid('address')}"
                  class="w-full">
                <small *ngIf="isInvalid('address')" class="p-error">{{ getErrorMessage('address') }}</small>
              </div>

              <div class="field col-12 md:col-6">
                <label for="phone" class="block font-medium mb-2">Phone Number *</label>
                <input
                  id="phone"
                  type="text"
                  pInputText
                  formControlName="phone"
                  placeholder="9 digits"
                  [ngClass]="{'ng-invalid ng-dirty': isInvalid('phone')}"
                  class="w-full">
                <small *ngIf="isInvalid('phone')" class="p-error">{{ getErrorMessage('phone') }}</small>
              </div>

              <div class="field col-12 md:col-6">
                <label for="email" class="block font-medium mb-2">Email *</label>
                <input
                  id="email"
                  type="email"
                  pInputText
                  formControlName="email"
                  [ngClass]="{'ng-invalid ng-dirty': isInvalid('email')}"
                  class="w-full">
                <small *ngIf="isInvalid('email')" class="p-error">{{ getErrorMessage('email') }}</small>
              </div>

              <div class="field col-12">
                <label for="website" class="block font-medium mb-2">Website</label>
                <input
                  id="website"
                  type="url"
                  pInputText
                  formControlName="website"
                  placeholder="https://example.org"
                  class="w-full">
              </div>
            </div>
          </div>

          <p-divider></p-divider>

          <div class="form-section">
            <h2 class="section-title">Additional Information</h2>

            <div class="form-grid">
              <div class="field col-12 md:col-6">
                <label for="mission" class="block font-medium mb-2">Mission</label>
                <textarea
                  id="mission"
                  pInputTextarea
                  formControlName="mission"
                  [rows]="2"
                  [autoResize]="true"
                  class="w-full"></textarea>
              </div>

              <div class="field col-12 md:col-6">
                <label for="vision" class="block font-medium mb-2">Vision</label>
                <textarea
                  id="vision"
                  pInputTextarea
                  formControlName="vision"
                  [rows]="2"
                  [autoResize]="true"
                  class="w-full"></textarea>
              </div>
            </div>
          </div>

          <p-divider></p-divider>

          <div class="form-section">
            <h2 class="section-title">Bank Information</h2>

            <div class="form-grid">
              <div class="field col-12 md:col-6">
                <label for="bankName" class="block font-medium mb-2">Bank Name</label>
                <input
                  id="bankName"
                  type="text"
                  pInputText
                  formControlName="bankName"
                  class="w-full">
              </div>

              <div class="field col-12 md:col-6">
                <label for="bankAccount" class="block font-medium mb-2">Bank Account Number</label>
                <input
                  id="bankAccount"
                  type="text"
                  pInputText
                  formControlName="bankAccount"
                  class="w-full">
              </div>

              <div class="field col-12">
                <label for="interbankAccount" class="block font-medium mb-2">Interbank Account (CCI)</label>
                <input
                  id="interbankAccount"
                  type="text"
                  pInputText
                  formControlName="interbankAccount"
                  class="w-full">
              </div>
            </div>
          </div>

          <div class="form-footer">
            <button
              pButton
              pRipple
              type="submit"
              label="Register NGO"
              icon="pi pi-check"
              [loading]="isSubmitting"
              [disabled]="isSubmitting"
              class="p-button-lg">
            </button>
          </div>
        </form>
      </p-card>
    </div>
  </div>
</div>
