<!-- pet-visit-dialog.component.html -->
<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [style]="{width: '90%', maxWidth: '500px'}"
  [header]="'Schedule a Visit - ' + (pet?.name || '')"
  (onHide)="closeDialog()">

  <div class="visit-dialog-content" *ngIf="pet">
    <div class="visit-pet-info mb-4">
      <div class="flex align-items-center">
        <div class="pet-image-small mr-3" *ngIf="pet.images && pet.images.length > 0">
          <img [src]="pet.images[0]" [alt]="pet.name">
        </div>
        <div class="pet-info-summary">
          <h3 class="m-0 text-xl">{{pet.name}}</h3>
          <p class="m-0 text-sm text-color-secondary">{{pet.breed}} â€¢ {{pet.age}} years</p>
        </div>
      </div>
    </div>

    <div class="visit-form">
      <div class="field mb-4">
        <label for="visitDate" class="block font-medium mb-2">When would you like to visit?</label>
        <p-date-picker
          id="visitDate"
          [(ngModel)]="visitDate"
          [showTime]="true"
          [showIcon]="true"
          [minDate]="minDate"
          [readonlyInput]="true"
          [style]="{'width':'100%'}"
          dateFormat="yy-mm-dd"
          placeholder="Select date and time">
        </p-date-picker>
        <small class="text-color-secondary">Choose a date and time for your visit</small>
      </div>

      <div class="field mb-4">
        <label for="notes" class="block font-medium mb-2">Notes</label>
        <textarea
          id="notes"
          [(ngModel)]="notes"
          [rows]="5"
          placeholder="Share any questions or special requirements for your visit"
          [style]="{'width':'100%'}">
        </textarea>
      </div>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="flex justify-content-end gap-2">
      <p-button
        label="Cancel"
        icon="pi pi-times"
        styleClass="p-button-text"
        (click)="closeDialog()">
      </p-button>
      <p-button
        label="Schedule Visit"
        icon="pi pi-calendar-plus"
        (click)="submitVisitRequest()">
      </p-button>
    </div>
  </ng-template>
</p-dialog>
